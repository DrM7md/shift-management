import{r as v,u as m,j as e,H as y}from"./app-Cwhk-y-Q.js";import{M as b,A as w,D as S}from"./MainLayout-DG_h4u18.js";import{G as d}from"./Grid-ClWOtsL_.js";import{C as x,d as p,T as o,B as n}from"./Schedule-DiIcUQZb.js";import{P as h}from"./Person-IF5kxVxm.js";import{T as c}from"./TextField-B5TSfn_l.js";import{E as C,L as u}from"./Lock-DKkfE01I.js";import{B as f}from"./Button-bpof-n8Y.js";import{S as D}from"./Save-Ub1bZzSp.js";import{S as I}from"./Snackbar-DrVTsFTV.js";import{A as W}from"./Alert-BPajDfgF.js";function G({user:i}){const[l,t]=v.useState({open:!1,message:"",severity:"success"}),a=m({name:i.name,email:i.email}),r=m({current_password:"",password:"",password_confirmation:""}),j=s=>{s.preventDefault(),a.patch("/profile",{onSuccess:()=>{t({open:!0,message:"تم تحديث الملف الشخصي بنجاح",severity:"success"})},onError:()=>{t({open:!0,message:"حدث خطأ أثناء التحديث",severity:"error"})}})},g=s=>{s.preventDefault(),r.put("/password",{onSuccess:()=>{r.reset(),t({open:!0,message:"تم تغيير كلمة المرور بنجاح",severity:"success"})},onError:()=>{t({open:!0,message:"حدث خطأ أثناء تغيير كلمة المرور",severity:"error"})}})};return e.jsxs(b,{title:"الملف الشخصي",children:[e.jsx(y,{title:"الملف الشخصي"}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{size:{xs:12,md:4},children:e.jsx(x,{children:e.jsxs(p,{sx:{textAlign:"center",py:4},children:[e.jsx(w,{sx:{width:120,height:120,mx:"auto",mb:2,fontSize:"3rem",fontWeight:700,background:"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)",boxShadow:"0 10px 30px rgba(99, 102, 241, 0.3)"},children:i.name.charAt(0)}),e.jsx(o,{variant:"h5",fontWeight:700,gutterBottom:!0,children:i.name}),e.jsx(o,{color:"text.secondary",children:i.email}),e.jsx(S,{sx:{my:3}}),e.jsx(n,{sx:{display:"flex",justifyContent:"center",gap:1},children:e.jsxs(n,{sx:{textAlign:"center",px:2},children:[e.jsx(o,{variant:"h6",fontWeight:700,color:"primary",children:"مدير"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"الصلاحية"})]})})]})})}),e.jsxs(d,{size:{xs:12,md:8},children:[e.jsx(x,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(h,{color:"primary"}),e.jsx(o,{variant:"h6",fontWeight:600,children:"معلومات الحساب"})]}),e.jsx("form",{onSubmit:j,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsx(c,{label:"الاسم",value:a.data.name,onChange:s=>a.setData("name",s.target.value),error:!!a.errors.name,helperText:a.errors.name,fullWidth:!0,InputProps:{startAdornment:e.jsx(h,{color:"action",sx:{mr:1}})}}),e.jsx(c,{label:"البريد الإلكتروني",type:"email",value:a.data.email,onChange:s=>a.setData("email",s.target.value),error:!!a.errors.email,helperText:a.errors.email,fullWidth:!0,InputProps:{startAdornment:e.jsx(C,{color:"action",sx:{mr:1}})}}),e.jsx(f,{type:"submit",variant:"contained",startIcon:e.jsx(D,{}),disabled:a.processing,sx:{alignSelf:"flex-start"},children:"حفظ التغييرات"})]})})]})}),e.jsx(x,{children:e.jsxs(p,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(u,{color:"primary"}),e.jsx(o,{variant:"h6",fontWeight:600,children:"تغيير كلمة المرور"})]}),e.jsx("form",{onSubmit:g,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsx(c,{type:"password",label:"كلمة المرور الحالية",value:r.data.current_password,onChange:s=>r.setData("current_password",s.target.value),error:!!r.errors.current_password,helperText:r.errors.current_password,fullWidth:!0}),e.jsx(c,{type:"password",label:"كلمة المرور الجديدة",value:r.data.password,onChange:s=>r.setData("password",s.target.value),error:!!r.errors.password,helperText:r.errors.password,fullWidth:!0}),e.jsx(c,{type:"password",label:"تأكيد كلمة المرور",value:r.data.password_confirmation,onChange:s=>r.setData("password_confirmation",s.target.value),fullWidth:!0}),e.jsx(f,{type:"submit",variant:"outlined",color:"warning",startIcon:e.jsx(u,{}),disabled:r.processing,sx:{alignSelf:"flex-start"},children:"تغيير كلمة المرور"})]})})]})})]})]}),e.jsx(I,{open:l.open,autoHideDuration:4e3,onClose:()=>t({...l,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsx(W,{severity:l.severity,onClose:()=>t({...l,open:!1}),children:l.message})})]})}export{G as default};
